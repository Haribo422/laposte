"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(r,!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fillDataTagcKey(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r="";if(t){var a=t.dataset;if(e){var n=t.closest(".js-autopromo");n&&(r=n.id?n.id+"_":"")}a&&(a.tagc_adid&&(r+=a.tagc_adid+"_"),a.tagc_productid&&(r+=a.tagc_productid+"_"),a.tagc_format&&(r+=a.tagc_format))}return r}function loadScript(t,e,r){var a=document.createElement("script");a.type="text/javascript","async"==r?a.async=!0:"defer"==r&&(a.defer=!0),a.readyState?a.onreadystatechange=function(){"loaded"!=a.readyState&&"complete"!=a.readyState||(a.onreadystatechange=null,e())}:a.onload=function(){e()},a.src=t,document.getElementsByTagName("head")[0].appendChild(a)}function afficherMasquer(t,e){"none"==document.getElementById(t).style.display&&(document.getElementById(t).style.display="inherit",document.getElementById(t).style.margin="0px 5px 0px -16px",masquer(e))}function masquer(t){document.getElementById(t).style.display="none"}function ajaxShowCart(t,e){var r;(r=new XMLHttpRequest).onreadystatechange=function(){4==r.readyState&&200==r.status&&e(r.responseText)},r.open("GET",t,!0),r.send()}function createCrossEvent(t){if("function"==typeof Event)return new Event(t);var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}var desktopDynamicNav=function(){var t=[document.querySelector("nav")];return[{container:t[0],targetList:t[0]?t[0].querySelectorAll(".nav-logo a"):null,chapter1:"navbar_gauche",name:"logo_home"},{container:t[0],targetList:t[0]?t[0].querySelectorAll(".nav-search a"):null,chapter1:"navbar_gauche",type:"action"},{container:t[0],targetList:t[0]?t[0].querySelectorAll(".layer-grille a"):null,chapter1:"navbar_gauche",chapter2:"tous_nos_produits",chapter3Selector:".layer-grille-title"},{container:t[0],targetList:t[0]?t[0].querySelectorAll(".layer-cols a"):null,chapter1:"navbar_gauche",chapter2:"nos_marques"},{container:t[0],targetList:t[0]?t[0].querySelectorAll(".layer-media .content-over"):null,chapter1:"navbar_gauche",layerSelector:".isOpen > .js-open > span",sublayerSelector:".isOpen .layer-media .content-over",chapter3:"bannieres"},{container:t[0],targetList:t[0]?t[0].querySelectorAll(".follow-shipment a, .follow-shipment button"):null,chapter1:"navbar_gauche",layerSelector:".isOpen > .js-open > span",title:!0,chapter3:"suivre_un_envoi"},{container:document.querySelector("nav .nav-list"),targetList:t[0]?t[0].querySelectorAll(".nav-item, .layer-list-title, .sub-layer a"):null,chapter1:"navbar_gauche",layerSelector:".isOpen > .js-open > span",sublayerSelector:".isOpen .isOpen .layer-list-title"}]},desktopDynamicHeader=function(){var t=[document.querySelector(".header-access"),document.querySelector(".header-group"),document.querySelector(".header-univers"),document.querySelector(".header")];return[{container:t[0],targetList:t[0]?t[0].querySelectorAll("a, .header-access .header-title"):null,chapter1:"header",type:"navigation",chapter2:"acces_rapides",parentsLevels:3,chapter3Selector:".header-layer-title"},{container:t[1],targetList:t[1]?t[1].querySelectorAll("a, .header-group .header-title"):null,chapter1:"header",layerSelector:"header .isOpen .header-title",sublayerSelector:"",type:"exit"},{container:t[2],targetList:t[2]?t[2].querySelectorAll(".header-univers a"):null,chapter1:"header",type:"exit",chapter2:"switch_site"},{container:t[3],targetList:t[3]?t[3].querySelectorAll(".empty-cart a"):null,chapter1:"header",type:"navigation",chapter2:"votre_panier"},{container:t[3],targetList:t[3]?t[3].querySelectorAll(".header-account a, .header-account button"):null,chapter1:"header",type:"navigation",chapter2:"popup_connexion",title:"true"},{container:t[3],targetList:t[3]?t[3].querySelectorAll(".header-help"):null,chapter1:"header",type:"navigation",name:"aide_en_ligne"},{container:t[3],targetList:t[3]?t[3].querySelectorAll(".header-mail a"):null,chapter1:"header",type:"exit",name:"laposte.net"}]},desktopDynamicFooter=function(){var t=[document.querySelector("footer")];return[{container:t[0],targetList:t[0]?t[0].querySelectorAll(".footer-network-social a"):null,chapter1:"footer",type:"exit",chapter2:"social",title:!0},{container:t[0],targetList:t[0]?t[0].querySelectorAll(".footer-convenant a"):null,chapter1:"footer",chapter2:"engagements"},{container:t[0],targetList:t[0]?t[0].querySelectorAll(".footer-sitemap-list a"):null,chapter1:"footer",parentsLevels:3,chapter3Selector:".subtitle",chapter3To2:!0},{container:t[0],targetList:t[0]?t[0].querySelectorAll(".footer-apps a"):null,chapter1:"footer",type:"exit",chapter2:"nos_applications_mobiles",title:!0},{container:t[0],targetList:t[0]?t[0].querySelectorAll(".help-btn"):null,chapter1:"footer",name:"aide_en_ligne"}]},desktopDynamicBody=function(){var t=[document.querySelector(".quick-access"),document.querySelector(".read-also"),document.querySelector(".search-result-global"),document.querySelector(".js-seeMoreServices")];return[{container:t[0],targetList:t[0]?t[0].querySelectorAll(".quick-btn span"):null,chapter1:"acces_rapides",type:"action"},{container:t[1],targetList:t[1]?t[1].querySelectorAll('[data-model="model1"] .read-also-large a'):null,chapter1:"edito",chapter2:"model1",level2:1,chapter3:"push1"},{container:t[1],targetList:t[1]?t[1].querySelectorAll('[data-model="model1"] .read-also-item a'):null,chapter1:"edito",chapter2:"model1",level2:1,chapter3:"push",option:!0},{container:t[1],targetList:t[1]?t[1].querySelectorAll('[data-model="model2"] .read-also-item a'):null,chapter1:"edito",chapter2:"model2",level2:1,chapter3:"push"},{container:t[2],targetList:t[2]?t[2].querySelectorAll(".title-1 a"):null,chapter1:"resultats_recherche",level2:15,chapter2:"switch_site"},{container:t[3],targetList:t[3]?t[3].querySelectorAll(".see-more-link a"):null,chapter1:"resultats_recherche",level2:15,chapter2:"eservices",type:"action"}]},TagMobileNav=function(){function t(){_classCallCheck(this,t),this.containers=[document.querySelector("nav")],this.base={container:this.containers[0],targetList:this.containers[0]?this.containers[0].querySelectorAll("a:not(.js-navopener)"):null,chapter1:null},this.eventBase={chapter1Prefix:"bm_"},this.eventResult=this.eventBase,this.paramResult=Object.assign(this.base,this.eventResult),this.textList=[],this.addSelectorsList=[".js-navopener"],this.deleteSelectorList=[".js-nav-return"],this.navListener=new TagcListener}return _createClass(t,[{key:"load",value:function(){this.markFirstLevel(),this.listener(),this.add(),this.deleter(),this.cleanEvent()}},{key:"markFirstLevel",value:function(){if(this.containers&&this.containers[0]){var t=this.containers[0].querySelectorAll(".nav-content > .nav-bloc");Array.from(t).map(function(t){t.classList.add("js-tag-level0")})}}},{key:"listener",value:function(){var t=this;this.paramResult.targetList&&Array.from(this.paramResult.targetList).map(function(e){e.addEventListener("click",function(r){if(e.parentNode.classList.contains("autopromo")&&(t.textList=["autopromo"]),e.closest("ul")){var a=e.closest("ul").closest(".nav-bloc");if(t.paramResult.name="",a&&a.parentNode.classList.contains("nav-content")){var n=a.querySelector(".nav-bloc-title").innerText;t.textList=[t.navListener.formatText(n)]}}else{var i=e.innerText;t.textList=[],t.paramResult.name="bm_"+t.navListener.formatText(i)}t.update(),t.navListener.tcDynamicTreatment(t.paramResult,e,r)})})}},{key:"update",value:function(){"la_boutique"==this.textList[0]?(this.paramResult.chapter1=this.textList[1]?this.textList[1]:"",this.paramResult.chapter2=this.textList[2]?this.textList[2]:"",this.paramResult.chapter3=this.textList[3]?this.textList[3]:""):(this.paramResult.chapter1=this.textList[0]?this.textList[0]:"",this.paramResult.chapter2=this.textList[1]?this.textList[1]:"",this.paramResult.chapter3=this.textList[2]?this.textList[2]:"")}},{key:"add",value:function(){var t=this;this.addSelectorsList.map(function(e){var r=document.querySelectorAll(e);Array.from(r).map(function(e){e.addEventListener("click",function(){if(!e.parentNode.classList.contains("js-tag-level0")){var r=TcListener.formatText(e.innerText),a=TcListener.formatText(e.closest(".js-tag-level0").querySelector(".js-navopener").innerText);t.textList[0]=a,t.textList.push(r),t.update()}})})})}},{key:"deleter",value:function(){var t=this;this.deleteSelectorList.map(function(e){var r=document.querySelectorAll(e);Array.from(r).map(function(e){e.addEventListener("click",function(){t.textList.pop(),t.update()})})})}},{key:"cleanEvent",value:function(){var t=this;if(this.containers[0]){var e=this.containers[0].querySelectorAll(".js-nav-closer");Array.from(e).map(function(e){e.addEventListener("click",function(){t.clean()})})}}},{key:"clean",value:function(){this.textList=[],this.update()}}]),t}(),mobileDynamicHeader=function(){var t=[document.querySelector("header")];return[{container:t[0],targetList:t[0]?t[0].querySelectorAll("a:not(.logo)"):null,chapter1:"header"}]},mobileDynamicFooter=function(){var t=[document.querySelector("#footer")];return[{container:t[0],targetList:t[0]?t[0].querySelectorAll('a:not([class*="network-"])'):null,chapter1:"footer"},{container:t[0],targetList:t[0]?t[0].querySelectorAll(".network a"):null,chapter1:"footer",chapter2:"social"}]},mobileDynamicBody=function(){var t=[document.querySelector("main"),document.querySelector(".category-list"),document.querySelector(".direct-access"),document.getElementById("findPostOffice")],e=[{container:t[0],targetList:t[0]?t[0].querySelectorAll(".subscribe-banner button"):null,name:"creation_compte",type:"action",level2:1},{container:t[0],targetList:t[0]?t[0].querySelectorAll(".autopromo-big a"):null,chapter1:"",level2:1},{container:t[0],targetList:t[0]?t[0].querySelectorAll(".autopromo a"):null,chapter1:"",level2:1},{container:t[3],targetList:t[3]?t[3].querySelectorAll("button"):null,name:"localisation",type:"action",level2:1}],r=function(t,r){if(r){var a=r.querySelectorAll("a");Array.from(a).map(function(a,n){a.dataset.tagcPush="push".concat(n);var i={container:r,targetList:r.querySelectorAll('[data-tagc-push="push'.concat(n,'"]')),chapter1:t,chapter2:"push".concat(n+1),level2:1};e.push(i)})}};return r("category",t[1]),r("acces_directs",t[2]),e},otherPageListener={init:function(){this.newsletter()},newsletter:function(){(new TagcListener).tcDynamicTreatment({level2:"1",name:"souscription_newsletter",type:"action"},document.getElementById("newsletter"))},payline:function(){tc_events_8(this,"CLICK",{event:"F",name:"Page_Payline",level2:"111"})},paypal:function(){tc_events_8(this,"CLICK",{event:"F",name:"Page_Paypal",level2:"111"})}},_this=this,HIT_TimeOut=500,TcListener={taggedStatus:{display:{}},init:function(){var t=this;"undefined"!=typeof NodeList&&NodeList.prototype&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),window.addEventListener("tagco-loaded",function(){t.tcVars=tc_vars,t.formatCmsComponent(),t.tcDisplay(),t.tcClick(),t.tcPub(),t.tcSiDisplayProduct(),t.tcSiDisplayCart(),t.tcSiCheckout(),t.tcSiConfirmation();(new TagcListener).init()})},getTaggedStatus:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=fillDataTagcKey(t.hasAttribute("data-tagc")?t:t.querySelector("[data-tagc]"));return!!TcListener.taggedStatus.display[e]},setTaggedStatus:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var r=fillDataTagcKey(t.hasAttribute("data-tagc")?t:t.querySelector("[data-tagc]"));TcListener.taggedStatus.display[r]=e},tcLoad:function(t){var e=TcListener.buildParam(t.dataset);"reex-dn-ContentPage"===tc_vars.page_IDH?TcListener.sendHit(t,"REEX",e):TcListener.sendHit(t,"CLICK",e)},tcAjax:function(t,e){var r,t=void 0===t?"fr_FR":t,a={suivi_page:{event:"F",name:"resultats_suivi",chapter1:"outils",chapter2:"suivre",chapter3:"",level2:"101",type_suivi:e=void 0===e?"":e,langue_suivi:t},multi_suivi_page:{event:"F",name:"resultats_suivi",chapter1:"outils",chapter2:"suivre",chapter3:"multi_envoi",level2:"101",type_suivi:e,langue_suivi:t},suivi_page_mobile:{event:"F",name:"resultats_suivi",chapter1:"outils",chapter2:"suivi",chapter3:"",level2:"4",type_suivi:e,langue_suivi:t},suivi_page_mobile_pro:{event:"F",name:"resultats_suivi",chapter1:"outils",chapter2:"suivi",chapter3:"",level2:"4",type_suivi:"",langue_suivi:t}},n="true"==tc_vars.is_pro;r="site_mobile_boutique"!=tc_vars.nom_site&&"site_mobile_pro"!=tc_vars.nom_site?n?a.multi_suivi_page:a.suivi_page:n?a.suivi_page_mobile_pro:a.suivi_page_mobile,"function"!=typeof tc_events_1&&"function"!=typeof tc_events_8||TcListener.sendHit(this,"suivi",r),TcListener.tcClick()},tcAjaxModifLiv:function(t){"function"!=typeof tc_events_1&&"function"!=typeof tc_events_8||TcListener.sendHit(this,"modification_livraison",t),TcListener.tcClick()},tcClick:function(){for(var t=document.querySelectorAll('[data-tagc="clic"]:not(.tagged)'),e=0;e<t.length;e++)t[e].closest(".js-autopromo")||(t[e].addEventListener("click",function(t){var e=TcListener.buildParam(this.dataset);TcListener.sendHit(this,"CLICK",e),"submit"==this.getAttribute("type")&&this.closest("form").hasAttribute("onsubmit")&&this.closest("form").submit()}),t[e].classList.add("tagged"));for(var r=document.querySelectorAll(".js-autopromo"),a=0;a<r.length;a++)for(var n=r[a].querySelectorAll('[data-tagc="display"], [data-tagc="clic"]'),i=function(t){var e=n[t];e.addEventListener("click",function(t){var r=TcListener.buildParam(e.dataset);TcListener.sendHit(this,"CLICK",r)}),e.classList.add("tagged")},o=0;o<n.length;o++)i(o)},formatCmsComponent:function(){document.querySelectorAll('[class*="totag-id"]').forEach(function(t){var e="",r="",a=t.className.split(" ");Array.from(a).map(function(t,n){t.includes("totag-id")&&(e=a[n].split("__")[1]),t.includes("totag-format")&&(r=a[n].split("__")[1])}),t.dataset.tagc="display",t.dataset.tagc_event="autopromo",t.dataset.tagc_adid=e,t.dataset.tagc_format=""!=r?r:TcListener.formatText(t.innerText)})},tcDisplay:function(){for(var t=document.querySelectorAll(".js-autopromo"),e=0;e<t.length;e++){var r=t[e];r.id=void 0===r.id||""==r.id?"autopromoEl"+e:r.id}var a=document.querySelectorAll(".js-autopromo");null!==a&&a.forEach(function(t){t.querySelectorAll('[data-tagc="display"]').forEach(function(t){return TcListener.tcHitDisplay(t)})}),window.addEventListener("scroll",function(t){window.requestAnimationFrame(function(){var t=document.querySelectorAll(".js-autopromo");null!==t&&t.forEach(function(t){t.querySelectorAll('[data-tagc="display"]').forEach(function(t){return TcListener.tcHitDisplay(t)})})})})},tcClickOneShot:function(t){t&&t.addEventListener("click",function(t){var e=TcListener.buildParam(this.dataset);TcListener.sendHit(this,"CLICK",e),this.classList.add("tagged")})},tcFarandoleScroll:function(){},sendHit:function(t,e,r,a){"true"===tc_vars.is_desktop?"function"==typeof tc_events_1?(console.log("### send Hit::",e),tc_events_1(t,e,r)):console.log("tc_events_1 not yet loaded"):"function"==typeof tc_events_8?(console.log("### send Hit MOB::",e,r),tc_events_8(t,e,r)):console.log("tc_events_8 not yet loaded"),"function"==typeof a&&a()},isInViewport:function(t){var e=t.getBoundingClientRect();return e.top+2>=0&&e.left+2>=0&&e.bottom-2<=(window.innerHeight||document.documentElement.clientHeight)&&e.right-2<=(window.innerWidth||document.documentElement.clientWidth)},buildParam:function(t){var e={};for(var r in t)if(""!=t[r]){t[r]=this.formatText(t[r]);var a=r.replace("tagc_","");"undefined"!=a&&""!=a&&(0==t[r].indexOf("$")?e[a]=tc_vars[t[r].replace("$","")]:e[a]=t[r])}return e},formatKey:function(t){return t=t.replace("%","%25")},tcDisplayCarousel:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.hasAttribute("data-tagc")?t:t.querySelector("[data-tagc]");if(TcListener.isInViewport(r)){if(!1===TcListener.getTaggedStatus(r)){var a=TcListener.buildParam(r.dataset);""!==a&&r.closest(".js-autopromo")&&(e!=={}&&(a=_objectSpread({},a,{},e)),TcListener.sendHit(this,"DISPLAY",a,function(){return TcListener.setTaggedStatus(r,!0)}))}}else TcListener.setTaggedStatus(r,!1)},tcClickCarousel:function(t,e){var r=t.querySelectorAll(".main-slider-item")[e].querySelector("[data-tagc]"),a=TcListener.buildParam(r.dataset);""!==a&&r.closest(".js-autopromo")&&(a.position=parseInt(e)+1,console.log("je passe par le tcClickCarousel"),TcListener.sendHit(_this,"CLICK",a))},tcDisplaySend:function(t,e,r){TcListener.isInViewport(t)?t.dataset.tagc_visible="view":(t.dataset.tagc_visible="hidden",t.dataset.tagc_send=!1),"view"==t.dataset.tagc_visible&&"false"==t.dataset.tagc_send&&(TcListener.sendHit(_this,"DISPLAY",r),t.dataset.tagc_event_click||(t.addEventListener("click",function(){TcListener.sendHit(this,"CLICK",r)}),t.dataset.tagc_event_click=!0),e[t.dataset.tagc_productid]=!0,t.dataset.tagc_send=!0)},tcListenerDisplay:function(t,e,r){t.dataset.tagc_send=!1,TcListener.tcDisplaySend(t,e,r),window.addEventListener("scroll",function(a){TcListener.tcDisplaySend(t,e,r)})},tcPub:function(){var t={},e=document.querySelectorAll("ins");document.querySelectorAll('div[class*="regiePub"]').forEach(function(t){0==t.querySelectorAll("ins").length&&(e=[].concat(_toConsumableArray(e),[t]))});for(var r=0;r<e.length;r++){for(var a=e[r],n=a.classList,i="",o=/^js-tagc/,c=0;c<n.length;c++)o.test(n[c])&&(i=n[c]);""===i&&(i=a.id?a.id:"");var s=tc_vars.new_page_name.split("::");s=s[s.length-1],t.event="publisher",t.xtpub_b="display",t.xtpub_c=tc_vars.type_template+"-"+s,t.xtpub_d="regie-adverline",t.xtpub_e=a.clientWidth+"x"+a.clientHeight,t.xtpub_f=i,TcListener.sendHit(_this,"DISPLAY",t)}},isPage:function(t,e){return void 0!==TcListener.tcVars.type_template&&void 0!==TcListener.tcVars.page_type&&(TcListener.tcVars.page_type===t&&TcListener.tcVars.type_template===e)},getDataCart:function(){var t={};return"true"===tc_vars.is_desktop?(document.getElementById("cart")&&(t.si_minicart_show=document.getElementById("cart").classList.contains("isOpen")?1:0),document.getElementById("idCart")&&(t.si_cart_id=document.getElementById("idCart").value),document.getElementById("montantTTC")&&(t.si_amountTaxIncluded=document.getElementById("montantTTC").value),document.getElementById("montantTTC")&&(t.si_amountTaxFree=document.getElementById("montantTTC").value),document.getElementById("quantity")&&(t.si_orderQuantity=document.getElementById("quantity").value),document.getElementById("nbdistinctproduct")&&(t.si_nbDistinctProduct=document.getElementById("nbdistinctproduct").value)):tc_vars_ajax&&(t.si_cart_id=tc_vars_ajax.cart_id?tc_vars_ajax.cart_id:tc_vars.cart_id?tc_vars.cart_id:"",t.si_amountTaxFree=tc_vars_ajax.amountTaxFree?tc_vars_ajax.amountTaxFree:tc_vars.amountTaxFree?tc_vars.amountTaxFree:"",t.si_amountTaxIncluded=tc_vars_ajax.amountTaxIncluded?tc_vars_ajax.amountTaxIncluded:tc_vars.amountTaxIncluded?tc_vars.amountTaxIncluded:"",t.si_orderQuantity=tc_vars_ajax.orderQuantity?tc_vars_ajax.orderQuantity:tc_vars.orderQuantity?tc_vars.orderQuantity:"",t.si_nbDistinctProduct=tc_vars_ajax.nbDistinctProduct?tc_vars_ajax.nbDistinctProduct:tc_vars.nbDistinctProduct?tc_vars.nbDistinctProduct:""),t},getProductIndex:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"search_products";return Array.isArray(TcListener.tcVars[e])?TcListener.tcVars[e].findIndex(function(e){return e.order_product_id==t}):-1},findProduct:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"search_products";if(Array.isArray(TcListener.tcVars[e]))return TcListener.tcVars[e].find(function(e){return e.order_product_id==t})},getSiOrderProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"search_products",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=[];return TcListener.tcVars[t].forEach(function(t){var a={si_order_product_id:t.order_product_id,si_order_product_name:t.order_product_name,si_brand_name:t.brand_name,si_order_product_discounted:t.order_product_discounted,si_order_product_unitprice_ati:Number(t.order_product_unitprice_ati).toFixed(2),si_order_product_unitprice_tf:t.order_product_unitprice_tf,si_order_product_stock:t.order_product_stock,si_order_product_category_name1:t.order_product_category_name1,si_order_product_category_name2:t.order_product_category_name2,si_order_product_category_name3:t.order_product_category_name3,si_order_product_category_name4:t.order_product_category_name4,si_order_product_category_name5:t.order_product_category_name5,si_order_product_category_name6:t.order_product_category_name6};"SIDISPLAYPRODUCT"===e?a.si_variant="1":"SIDISPLAYCART"===e?a.si_order_product_quantity=t.order_product_quantity:"SICONFIRMATION"===e&&(a.si_variant=t.variant,a.si_order_product_quantity=t.order_product_quantity),r.push(a)}),r},getProductParamsMapping:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e={};return t&&(e.si_order_product_id=t.order_product_id,e.si_order_product_name=t.order_product_name,e.si_variant=t.variant,e.si_brand_name=t.brand_name,e.si_order_product_discounted=t.order_product_discounted,e.si_order_product_unitprice_ati=Number(t.order_product_unitprice_ati).toFixed(2),e.si_order_product_unitprice_tf=t.order_product_unitprice_tf,e.si_order_product_stock=t.order_product_stock,e.si_order_product_category_name1=t.order_product_category_name1,e.si_order_product_category_name2=t.order_product_category_name2,e.si_order_product_category_name3=t.order_product_category_name3,e.si_order_product_category_name4=t.order_product_category_name4,e.si_order_product_category_name5=t.order_product_category_name5,e.si_order_product_category_name6=t.order_product_category_name6),e},tcSiDisplayProduct:function(){if(Array.isArray(TcListener.tcVars.search_products)&&TcListener.tcVars.search_products.length>0){var t=TcListener.getSiOrderProducts("search_products","SIDISPLAYPRODUCT");TcListener.sendHit(_this,"SIDISPLAYPRODUCT",{si_order_products:t})}},tcSiAddToCart:function(t){var e={};e.si_cart_id=t.orderCode,e.si_order_product_id=t.productCode,e.si_variant=t.message,e.si_order_product_quantity=t.cartQuantity,e.si_order_cart_creation="0"==t.entryNumber&&"1"==t.cartQuantity?1:0;var r=TcListener.findProduct(t.productCode);if(r){e=_objectSpread({},e,{},TcListener.getProductParamsMapping(r)),TcListener.sendHit(_this,"SIADDTOCART",e),setTimeout(function(){var e=TcListener.getDataCart();if(console.log("pre SIADDTOCART",t,e),parseInt(e.si_nbDistinctProduct)>1){var r={si_cart_id:t.orderCode,si_amountTaxFree:e.si_amountTaxFree||t.dataCart.si_amountTaxFree||"",si_amountTaxIncluded:e.si_amountTaxIncluded||t.dataCart.si_amountTaxIncluded||"",si_orderQuantity:e.si_orderQuantity||t.quantity,si_nbDistinctProduct:e.si_nbDistinctProduct||t.nbDistinctProduct};TcListener.tcSiUpdateCart(r)}},HIT_TimeOut)}else if(console.log("tcSiAddToCart :: Impossible de retrouver le produits dont le productCode = ",t.productCode),TcListener.isPage("Tunnel","Panier")&&Array.isArray(TcListener.tcVars.order_products)){var a=TcListener.getDataCart();t=_objectSpread({},t,{dataCart:a}),localStorage.setItem("tagC_cart_addToCart_orderData",JSON.stringify(t))}},tcSiRemoveToCart:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};setTimeout(function(){var e=TcListener.getDataCart(),r={};r.si_cart_id=t.orderCode?t.orderCode:e.si_cart_id,r.si_order_product_quantity=t.quantity,r.si_order_product_id=t.productCode;var a=TcListener.findProduct(t.productCode);if(void 0==a&&(a=TcListener.findProduct(t.productCode,"order_products")),a){r=_objectSpread({},r,{},TcListener.getProductParamsMapping(a))}else console.log("tcSiRemoveToCart :: undefined product whose code is",t.productCode);TcListener.sendHit(_this,"SIREMOVETOCART",r)},HIT_TimeOut)},tcSiUpdateCart:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{setTimeout(function(){var e=TcListener.getDataCart(),r={};r.si_cart_id=t.si_cart_id?t.si_cart_id:e.si_cart_id,r.si_amountTaxIncluded=t.si_amountTaxIncluded?t.si_amountTaxIncluded:e.si_amountTaxIncluded,r.si_amountTaxFree=t.si_amountTaxFree?t.si_amountTaxFree:e.si_amountTaxFree,r.si_orderQuantity=void 0!==t.si_orderQuantity?t.si_orderQuantity:e.si_orderQuantity,r.si_nbDistinctProduct=void 0!==t.si_nbDistinctProduct?t.si_nbDistinctProduct:e.si_nbDistinctProduct,r.si_cart_id&&TcListener.sendHit(_this,"SIUPDATECART",r)},HIT_TimeOut)}catch(t){console.log("tcSiUpdateCart :: Exception ",t)}},tcSiDisplayCart:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(TcListener.isPage("Tunnel","Panier")&&void 0!==TcListener.tcVars.order_products){var e={};if(null==t?(e.si_cart_id=TcListener.tcVars.cart_id,e.si_amountTaxIncluded=TcListener.tcVars.amountTaxIncluded,e.si_amountTaxFree=TcListener.tcVars.amountTaxFree,e.si_orderQuantity=TcListener.tcVars.orderQuantity,e.si_nbDistinctProduct=TcListener.tcVars.nbDistinctProduct):(e.si_cart_id=t.si_cart_id,e.si_amountTaxIncluded=t.si_amountTaxIncluded||t.amountTaxIncluded,e.si_amountTaxFree=t.si_amountTaxFree||t.amountTaxFree,e.si_orderQuantity=t.si_orderQuantity||t.orderQuantity,e.si_nbDistinctProduct=t.si_nbDistinctProduct||t.nbDistinctProduct),Array.isArray(TcListener.tcVars.order_products)&&TcListener.tcVars.order_products.length>0){e=_objectSpread({},e,{si_order_products:TcListener.getSiOrderProducts("order_products","SIDISPLAYCART")}),TcListener.sendHit(_this,"SIDISPLAYCART",e)}TcListener.syncTcSiUpdateCart(),TcListener.syncTcSiRemoveToCart()}else if((void 0!==TcListener.tcVars.order_products||void 0!==TcListener.tcVars.search_products)&&null!==t&&1==t.si_minicart_show){var r={};r.si_cart_id=t.si_cart_id,r.si_amountTaxIncluded=t.si_amountTaxIncluded,r.si_amountTaxFree=t.si_amountTaxFree,r.si_orderQuantity=t.si_orderQuantity,r.si_nbDistinctProduct=t.si_nbDistinctProduct,r.si_order_products=[],TcListener.sendHit(_this,"SIDISPLAYCART",r)}},syncTcSiUpdateCart:function(){try{if(localStorage.getItem("tagC_cart_addToCart_orderData")){var t=JSON.parse(localStorage.getItem("tagC_cart_addToCart_orderData"));if(t){var e=TcListener.tcVars.order_products.find(function(e){return e.order_product_id==t.productCode});if(e)if(TcListener.tcVars.search_products=[e],1==t.nbDistinctProduct)TcListener.tcSiAddToCart(t);else if(t.nbDistinctProduct>1){var r={si_cart_id:t.orderCode,si_amountTaxIncluded:t.dataCart.si_amountTaxIncluded||"",si_amountTaxFree:t.dataCart.si_amountTaxFree||"",si_orderQuantity:t.quantity,si_nbDistinctProduct:t.nbDistinctProduct};TcListener.tcSiUpdateCart(r)}}localStorage.removeItem("tagC_cart_addToCart_orderData")}}catch(t){console.log("Exception :: tcSiDisplayCart :: Try to tag added product from cart page:",t)}},syncTcSiRemoveToCart:function(){try{if(localStorage.getItem("tagC_cart_product_to_remove")){var t=JSON.parse(localStorage.getItem("tagC_cart_product_to_remove"));Array.isArray(TcListener.tcVars.order_products)?TcListener.tcVars.order_products.push(t):TcListener.tcVars.order_products=[t];var e={orderCode:TcListener.tcVars.cart_id,productCode:t.order_product_id,quantity:t.order_product_quantity,cartQuantity:1};TcListener.tcSiRemoveToCart(e),localStorage.removeItem("tagC_cart_product_to_remove");var r=localStorage.getItem("tagC_cart_before_product_remove"),a=JSON.parse(r);a.si_orderQuantity=a.si_orderQuantity-t.order_product_quantity,a.si_nbDistinctProduct--,TcListener.tcSiUpdateCart(a),localStorage.removeItem("tagC_cart_before_product_remove")}document.querySelectorAll(".js-delete-product").forEach(function(t){t.addEventListener("click",function(){return TcListener._storeProductToDelete(t)})})}catch(t){console.log("Exception :: tcSiDisplayCart :: Try Sync TcSiRemoveToCart hit:",t)}},_storeProductToDelete:function(t){var e="true"===tc_vars.is_desktop?t.closest(".product").querySelector(".js-quantity"):t.closest(".product-item").querySelector(".js-quantity");if(e){var r=e.dataset.btkProductCode||e.dataset.productCode,a=TcListener.findProduct(r,"order_products");a&&localStorage.setItem("tagC_cart_product_to_remove",JSON.stringify(a));var n=TcListener.getDataCart();n&&localStorage.setItem("tagC_cart_before_product_remove",JSON.stringify(n));var i=document.querySelector(".btns-cancel.js-fb-close");i&&i.addEventListener("click",function(){return localStorage.removeItem("tagC_cart_product_to_remove")})}},tcSiCheckout:function(){if(TcListener.isPage("Tunnel","Paiement")){var t={};t.si_cart_id=TcListener.tcVars.cart_id,t.si_amountTaxIncluded=TcListener.tcVars.amountTaxIncluded,t.si_amountTaxFree=TcListener.tcVars.amountTaxFree,t.si_orderQuantity=TcListener.tcVars.orderQuantity,t.si_nbDistinctProduct=TcListener.tcVars.nbDistinctProduct,t.si_deliveryMethod=TcListener.tcVars.deliveryMethod,t.si_shippingFeesTaxIncluded=TcListener.tcVars.shippingFeesTaxIncluded,t.si_shippingFeesTaxFree=TcListener.tcVars.shippingFeesTaxFree,TcListener.sendHit(_this,"SICHECKOUT",t)}},tcSiConfirmation:function(){if(TcListener.isPage("Tunnel","Confirmation Commande")){var t={};if(t.si_cart_id=TcListener.tcVars.cart_id,t.si_amountTaxIncluded=TcListener.tcVars.amountTaxIncluded,t.si_amountTaxFree=TcListener.tcVars.amountTaxFree,t.si_orderQuantity=TcListener.tcVars.orderQuantity,t.si_nbDistinctProduct=TcListener.tcVars.nbDistinctProduct,t.si_deliveryMethod=TcListener.tcVars.deliveryMethod,t.si_shippingFeesTaxIncluded=TcListener.tcVars.shippingFeesTaxIncluded,t.si_shippingFeesTaxFree=TcListener.tcVars.shippingFeesTaxFree,t.si_order_id=TcListener.tcVars.order_id,t.si_promotionalCode=TcListener.tcVars.promotionalCode,t.si_paymentMethod=TcListener.tcVars.paymentMethod,Array.isArray(TcListener.tcVars.order_products)&&TcListener.tcVars.order_products.length>0){t=_objectSpread({},t,{si_order_products:TcListener.getSiOrderProducts("order_products","SICONFIRMATION")}),TcListener.sendHit(_this,"SICONFIRMATION",t)}}},formatText:function(t){for(var e=null!=t?t:"",r=new Array(/À/g,/Á/g,/Â/g,/Ã/g,/Ä/g,/Å/g,/Æ/g,/Ç/g,/È/g,/É/g,/Ê/g,/Ë/g,/Ì/g,/Í/g,/Î/g,/Ï/g,/Ð/g,/Ñ/g,/Ò/g,/Ó/g,/Ô/g,/Õ/g,/Ö/g,/Ø/g,/Ù/g,/Ú/g,/Û/g,/Ü/g,/Ý/g,/Þ/g,/ß/g,/à/g,/á/g,/â/g,/ã/g,/ä/g,/å/g,/æ/g,/ç/g,/è/g,/é/g,/ê/g,/ë/g,/ì/g,/í/g,/î/g,/ï/g,/ð/g,/ñ/g,/ò/g,/ó/g,/ô/g,/õ/g,/ö/g,/ø/g,/ù/g,/ú/g,/û/g,/ü/g,/ý/g,/ý/g,/þ/g,/ÿ/g),a=new Array("A","A","A","A","A","A","A","C","E","E","E","E","I","I","I","I","D","N","O","O","O","O","O","O","U","U","U","U","Y","b","s","a","a","a","a","a","a","a","c","e","e","e","e","i","i","i","i","d","n","o","o","o","o","o","o","u","u","u","u","y","y","b","y"),n=0;n<r.length;n++)e=e.replace(r[n],a[n]);return e.trim().toLowerCase().replace(/\n/gi,"_").replace(/ /g,"_").replace(/[']/g,"_").replace(/[\#+()$~%":*<>{}€]/g,"").replace(/&/g,"et")},getElementCible:function(t){return t&&t.hasAttribute("data-tagc")&&"display"==String(t.dataset.tagc).toLowerCase()?t:t.querySelector("[data-tagc=display], [data-tagc=DISPLAY]")},tcHitDisplay:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=TcListener.getElementCible(t);if(r)if(TcListener.isInViewport(r)){if(!1===TcListener.getTaggedStatus(r)){var a=TcListener.buildParam(r.dataset);a!=={}&&r.closest(".js-autopromo")&&(e!=={}&&(a=_objectSpread({},a,{},e)),TcListener.sendHit(_this,"DISPLAY",a,function(){return TcListener.setTaggedStatus(r,!0)}))}}else TcListener.setTaggedStatus(r,!1)},tcHitFlickityDisplay:function(t,e,r,a,n,i){for(var o=0;o<t.length;o++)t[o]&&e.getBoundingClientRect().top>=0&&e.getBoundingClientRect().top<=(window.innerHeight||document.documentElement.clientHeight)&&e.getBoundingClientRect().bottom>=0&&e.getBoundingClientRect().bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.getBoundingClientRect().left>=0&&e.getBoundingClientRect().right<=(window.innerWidth||document.documentElement.clientWidth)?(i[n]||(TcListener.sendHit(_this,"DISPLAY",a),r[n]||(e.addEventListener("click",function(t){TcListener.sendHit(this,"CLICK",a)}),r[n]=!0)),i[n]=!0):i[n]=!1}};document.addEventListener("DOMContentLoaded",function(t){var e=document.querySelectorAll(".home-carousel-list .dot, .content .dot"),r=document.querySelectorAll("figure a");if(e.length){for(i=0;i<e.length;i++)e[i].setAttribute("data-i",i),e[i].addEventListener("touchstart",function(t){var e=this.getAttribute("data-i");TcListener.sendHit(r[e],"DISPLAY",TcListener.buildParam(r[e].dataset))});for(var a=document.querySelectorAll(".thumb-mobile img"),n=document.querySelectorAll(".details-mobile a"),i=0;i<a.length;i++)a[i].setAttribute("data-i",i),a[i].addEventListener("click",function(t){var e=this.getAttribute("data-i");n[e].click()});for(var o=new Event("touchstart"),i=0;i<a.length;i++)a[i].setAttribute("data-i",i),a[i].addEventListener("click",function(t){var e=this.getAttribute("data-i");n[e].dispatchEvent(o)});document.querySelector(".dot").addEventListener("click",function(t){TcListener.sendHit(document.querySelector(".main-slider-wrap"),"DISPLAY",TcListener.buildParam(document.querySelector(".main-slider-wrap").dataset))})}});var TagcListener=function(){function t(){_classCallCheck(this,t),this.dynamicClickList=[]}return _createClass(t,[{key:"init",value:function(){this.initClosest();var e=desktopDynamicNav(),r=desktopDynamicHeader(),a=desktopDynamicFooter(),n=desktopDynamicBody(),i=mobileDynamicHeader(),o=mobileDynamicFooter(),c=mobileDynamicBody();if("true"==tc_vars.is_desktop)this.dynamicClickList=[].concat(_toConsumableArray(e),_toConsumableArray(r),_toConsumableArray(a),_toConsumableArray(n));else{this.dynamicClickList=[].concat(_toConsumableArray(i),_toConsumableArray(o),_toConsumableArray(c));(new TagMobileNav).load()}this.dynamicClickList.map(function(e){(new t).tcDynamicEvent(e)})}},{key:"tcDynamicEvent",value:function(t){var e=this;t.targetList&&Array.from(t.targetList).map(function(r){r.addEventListener("click",function(a){e.tcDynamicTreatment(t,r,a)})})}},{key:"tcDynamicTreatment",value:function(t,e,r){var a={event:"C",level2:"true"==tc_vars.is_desktop?18:2,chapter1Prefix:t.chapter1Prefix?t.chapter1Prefix:"",chapter1Suffix:t.chapter1Suffix?t.chapter1Suffix:""},n=t.layerSelector&&t.container.querySelector(t.layerSelector)?t.container.querySelector(t.layerSelector):" ",i=t.sublayerSelector&&t.container.querySelector(t.sublayerSelector)?t.container.querySelector(t.sublayerSelector):" ";if(t.event&&(a.event=t.event),t.level2&&(a.level2=t.level2),t.type)a.type_clic=t.type;else if(r&&r.currentTarget.href){r.currentTarget.href.split("/")[2]!==window.location.hostname?a.type_clic="exit":a.type_clic="navigation"}else a.type_clic="navigation";if(t.name)if(t.namePosition){o=parseInt(e.dataset.position)+1;a.name="".concat(t.name).concat(o)}else a.name="".concat(t.name);else e.title?a.name="".concat(this.formatText(e.title)):a.name="".concat(this.formatText(e.textContent));if(t.chapter1&&(a.chapter1="".concat(a.chapter1Prefix).concat(t.chapter1).concat(a.chapter1Suffix)),t.chapter2)if(t.chapter2Position){o=parseInt(e.dataset.position)+1;a.chapter2=t.chapter2+""+o}else a.chapter2=t.chapter2;else 1!=n.length&&this.formatText(n.textContent)!=a.name?a.chapter2=this.formatText(n.textContent):a.chapter2="";if(t.chapter3)if(t.chapter3Position){var o=parseInt(e.dataset.position)+1,c=parseInt(e.parentNode.dataset.line)+1;a.chapter3=t.chapter3Line?"line"+c+t.chapter3+o:t.chapter3+""+o}else a.chapter3=t.chapter3;else if(t.chapter3Selector&&3==t.parentsLevels){var s=e.parentNode.parentNode.parentNode.querySelector(t.chapter3Selector);a.chapter3=this.formatText(s.textContent)}else if(t.chapter3Selector&&"tous_nos_produits"==t.chapter2){var d=e.parentNode.parentNode.parentNode.querySelector(t.chapter3Selector),u=e.parentNode.parentNode.parentNode.parentNode.querySelector(t.chapter3Selector);a.chapter3=d.querySelector("h2")?this.formatText(d.textContent):this.formatText(u.textContent)}else 1!=i.length&&this.formatText(i.textContent)!=a.name?a.chapter3=this.formatText(i.textContent):a.chapter3="";t.chapter3To2&&(a.chapter2=a.chapter3,a.chapter3=""),this.sendHit(e,"CLICK",a)}},{key:"formatText",value:function(t){for(var e=null!=t?t:"",r=new Array(/À/g,/Á/g,/Â/g,/Ã/g,/Ä/g,/Å/g,/Æ/g,/Ç/g,/È/g,/É/g,/Ê/g,/Ë/g,/Ì/g,/Í/g,/Î/g,/Ï/g,/Ð/g,/Ñ/g,/Ò/g,/Ó/g,/Ô/g,/Õ/g,/Ö/g,/Ø/g,/Ù/g,/Ú/g,/Û/g,/Ü/g,/Ý/g,/Þ/g,/ß/g,/à/g,/á/g,/â/g,/ã/g,/ä/g,/å/g,/æ/g,/ç/g,/è/g,/é/g,/ê/g,/ë/g,/ì/g,/í/g,/î/g,/ï/g,/ð/g,/ñ/g,/ò/g,/ó/g,/ô/g,/õ/g,/ö/g,/ø/g,/ù/g,/ú/g,/û/g,/ü/g,/ý/g,/ý/g,/þ/g,/ÿ/g),a=new Array("A","A","A","A","A","A","A","C","E","E","E","E","I","I","I","I","D","N","O","O","O","O","O","O","U","U","U","U","Y","b","s","a","a","a","a","a","a","a","c","e","e","e","e","i","i","i","i","d","n","o","o","o","o","o","o","u","u","u","u","y","y","b","y"),n=0;n<r.length;n++)e=e.replace(r[n],a[n]);return e.trim().toLowerCase().replace(/\n/gi,"_").replace(/ /g,"_").replace(" ","_").replace(/'/g,"_").replace(/&/g,"et")}},{key:"sendHit",value:function(t,e,r,a){"true"===tc_vars.is_desktop?"function"==typeof tc_events_1?tc_events_1(t,e,r):console.log("tc_events_1 not yet loaded"):"function"==typeof tc_events_8?tc_events_8(t,e,r):console.log("tc_events_8 not yet loaded"),"function"==typeof a&&a()}},{key:"initClosest",value:function(){window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){var e,r=(this.document||this.ownerDocument).querySelectorAll(t),a=this;do{for(e=r.length;--e>=0&&r.item(e)!==a;);}while(e<0&&(a=a.parentElement));return a})}}]),t}();document.addEventListener("DOMContentLoaded",function(){TcListener.init()});
//# sourceMappingURL=../../js-gn/analytics/listener.min.js.map
